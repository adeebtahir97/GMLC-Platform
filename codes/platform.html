<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

	<title>GMLC Platform</title>
	<script type="text/javascript" src="./pageUtils.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script type="text/javascript">
        (function($){
            $.fn.serializeObject = function () {
                "use strict";
                var result = {};
                var extend = function (i, element) {
                    var node = result[element.name];
                    if ('undefined' !== typeof node && node !== null) {
                        if ($.isArray(node)) {
                            node.push(element.value);
                    } else {
                            result[element.name] = [node, element.value];
                        }
                    } else {
                        result[element.name] = element.value;
                    }
                };
                $.each(this.serializeArray(), extend);
                return result;
            };
        })(jQuery);
    </script>
    <script>
        $(document).ready(function () {
            $("#prep").on('submit', function (event) {                
                var jsonData = JSON.stringify($('#prep').serializeObject());                
                console.log(jsonData)
                alert(jsonData)
                $.ajax({                    
                    data: jsonData,
                    headers: {  'Access-Control-Allow-Origin': '*/*','Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS' },          
                    type: 'POST',
                    url: 'http://127.0.0.1:4040/autocoding/preprocess',
                    contentType:'application/json',                    
                    success: function (data) {
                        var obj = JSON.parse(data)                        
                        alert(obj.response);
                    }
                });
                event.preventDefault();
            });
            $("#train").on('submit', function (event) {                
                var jsonData = JSON.stringify($('#train').serializeObject());
                console.log(jsonData)
                alert(jsonData)
                $.ajax({                    
                    data: jsonData,
                    headers: {  'Access-Control-Allow-Origin': '*/*','Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS' },
                    type: 'POST',
                    url: 'http://127.0.0.1:4050/autocoding/train',
                    contentType:'application/json',                    
                    success: function (data) {
                        var obj = JSON.parse(data)                        
                        alert(obj.response);
                    }
                });
                event.preventDefault();
            });
            $("#model-form").on('submit', function (event) {                
                var jsonData = JSON.stringify($('#model-form').serializeObject());
                console.log(jsonData)
                alert(jsonData)
                $.ajax({                    
                    data: jsonData,
                    headers: {  'Access-Control-Allow-Origin': '*/*','Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS' },
                    type: 'POST',
                    url: 'http://127.0.0.1:4050/autocoding/model',
                    contentType:'application/json',                    
                    success: function (data) {
                        var obj = JSON.parse(data)                        
                        alert(obj.response);
                    }
                });
                event.preventDefault();
            });
            $("#pred").on('submit', function (event) {                
                var jsonData = JSON.stringify($('#pred').serializeObject());
                console.log(jsonData)
                alert(jsonData)
                $.ajax({                    
                    data: jsonData,
                    headers: {  'Access-Control-Allow-Origin': '*/*','Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS' },
                    type: 'POST',
                    url: 'http://127.0.0.1:4060/autocoding/predict',
                    contentType:'application/json',                    
                    success: function (data) {
                        var obj = JSON.parse(data);                        
                       	var prediction = obj['predictions'][0][0];
                       	console.log(obj);
                       	predLength = (prediction.length - 2);
                       	var temp ="";
                       	for(var i=0;i<predLength;i++){
                       		temp += prediction[i];
                       		temp += " ";
                       	}
                       	document.getElementById('targets').value = temp;
                        alert(obj.predictions);
                        alert('accuracy->'+obj.accuracy);
                        alert('precision->'+obj.precision);
                        alert('recall->'+obj.recall);
                        alert('Fscore->'+obj.fscore);

                    }
                });
                event.preventDefault();
            });                  
        });
    </script>


	<!-- Google font -->
	<link href="https://fonts.googleapis.com/css?family=PT+Sans:400" rel="stylesheet">

	<!-- Bootstrap -->
	<link type="text/css" rel="stylesheet" href="css/bootstrap.min.css" />

	<!-- Custom stlylesheet -->
	<link type="text/css" rel="stylesheet" href="css/style.css" />

	<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
		  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
		  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->

</head>

<body>
	<div id="booking" class="section">
		<div class="section-center">
			<div class="container">
				<div class="row">
					<div class="booking-form">
						<h1 style="margin-left: auto; color: white;"><strong>Generic Multilabel Classification Platform</strong><h1>
						<button type="button" onclick="showSettings()"><img id="settings" src="./img/settings.jpg" width="80px" style="position: absolute; right:150px; top: 50px"></button>
						<div class="form-group">
							<div class="form-checkbox">									
								<button class="btn-primary" type="button" id="prepdiv" onclick="showPreprocessingSettings()"><h4>Preprocessing</h4></button>
								<button class="btn-primary" type="button" id="traindiv" onclick="showTrainSettings()"><h4>Training</h4></button>
								<button class="btn-primary" type="button" id="preddiv" onclick="showPredictionSettings()"><h4>Prediction</h4></button>
								<button class="btn-primary" type="button" id="acc" onclick="acc()"><h4>Accuracy</h4></button>
							</div>
						</div>
						<div id="prep-settings-form">
							<h3>Preprocessing</h3>
							<form id="prep">
								<div class="row">
									<div class="col-md-6">
										<div class="form-group">
											<span class="form-label">Data Source</span>
											<input id="sourceIndex" name="sourceIndex" class="form-control" type="text" placeholder="Path to CSV/ElasticIndex">
										</div>
									</div>
									<div class="col-md-6">
										<div class="form-group">
											<span class="form-label">Input Features</span>
											<input id="inputParams" name="inputParams" class="form-control" type="text" placeholder="Input Columns">
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-md-6">
										<div class="form-group">
											<span class="form-label">Targets</span>
											<input id="outputParams" name="outputParams" class="form-control" type="text" placeholder="Target Columns">
										</div>
									</div>
									<div class="col-md-6">
										<div class="form-group">
											<span class="form-label">Bucket Parameters</span>
											<input id="bucketParams" name="bucketParams" class="form-control" type="text" placeholder="Bucket Parameters">
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-md-6">
										<div class="form-group">
											<span class="form-label">Processed Data Destination</span>
											<input id="destinationIndex" name="destinationIndex" class="form-control" type="text" placeholder="Processed Data Destination">
										</div>
									</div>
									<div class="col-md-6">
										<div class="form-group">
											<span class="form-label">Callback URL</span>
											<input id="callbackUrl" name="callbackUrl" class="form-control" type="text" placeholder="Callback URL">
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-md-3">
										<div class="form-group">
											<span class="form-label">UID</span>
											<input id="uid" name="uid" class="form-control" type="text" placeholder="UID">
										</div>
									</div>
									<div class="col-md-3">
										<div class="form-btn">
											<button class="submit-btn">Start</button>
										</div>
									</div>
								</div>
							</form>
						</div>
						<div id="train-settings-form">
							<h3>Training</h3>
							<form id="train">
								<div class="row">
									<div class="col-md-6">
										<div class="form-group">
											<span class="form-label">Data Source</span>
											<input id="sourceIndex" name="sourceIndex" class="form-control" type="text" placeholder="Path to CSV/ElasticIndex">
										</div>
									</div>
									<div class="col-md-6">
										<div class="form-group">
											<span class="form-label">Input Features</span>
											<input class="form-control" type="text" placeholder="Input Columns" value="None" readonly style="background-color: #DF8181" disabled>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-md-6">
										<div class="form-group">
											<span class="form-label">Targets</span>
											<input class="form-control" type="text" placeholder="Target Columns" value="None" readonly style="background-color: #DF8181" disabled>
										</div>
									</div>
									<div class="col-md-6">
										<div class="form-group">
											<span class="form-label">Bucket Parameters</span>
											<input class="form-control" type="text" placeholder="Bucket Parameters" value="None" readonly style="background-color: #DF8181" disabled>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-md-6">
										<div class="form-group">
											<span class="form-label">Processed Data Destination</span>
											<input class="form-control" type="text" placeholder="Processed Data Destination" value="None" readonly style="background-color: #DF8181" disabled>
										</div>
									</div>
									<div class="col-md-6">
										<div class="form-group">
											<span class="form-label">Callback URL</span>
											<input id="callbackUrl" name="callbackUrl" class="form-control" type="text" placeholder="Callback URL">
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-md-3">
										<div class="form-group">
											<span class="form-label">UID</span>
											<input id="uid" name="uid" class="form-control" type="text" placeholder="UID">
										</div>
									</div>
									<div class="col-md-3">
										<div class="form-btn">
											<button class="submit-btn">Start</button>
										</div>
									</div>
								</div>
							</form>
						</div>
						<div id="model-settings">
							<h3>Model Parameters</h3>
							<form id="model-form">
								<div class="row">
									<div class="col-md-6">
										<div class="form-group">
											<span class="form-label">N_ESTIMATORS</span>
											<input id="nest" name="nest" class="form-control" type="text" placeholder="Number of Random Forest Estimators" value="">
										</div>
									</div>
									<div class="col-md-6">
										<div class="form-group">
											<span class="form-label">MAX_DEPTH</span>
											<input id="md" name="md" class="form-control" type="text" placeholder="Maximum Depth of Each Decision Tree" value="">
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-md-6">
										<div class="form-group">
											<span class="form-label">MIN_SAMP_LEAF</span>
											<input id="msl" name="msl" class="form-control" type="text" placeholder="Minimum Samples Per Leaf" value=""  value="">
										</div>
									</div>
									<div class="col-md-6">
										<div class="form-group">
											<span class="form-label">SIZE</span>
											<input id="sizeprop" name="sizeprop" class="form-control" type="text" placeholder="Maximum Nodes for Each Tree" value="">
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-md-6">
										<div class="form-group">
											<span class="form-label">MAX_FEATURES</span>
											<input id="mf" name="mf" class="form-control" type="text" placeholder="Specify the K Value" value="">
										</div>
									</div>
									<div class="col-md-6">
										<div class="form-group">
											<span class="form-label">SPLIT_CRITERION</span>
											<input id="crit" name="crit" class="form-control" type="text" placeholder="Criterion For Split">
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-md-3">
										<div class="form-btn">
											<button class="submit-btn">Set Parameters</button>
										</div>
									</div>
								</div>								
							</form>
						</div>						
						<div id="pred-settings-form">
							<h3>Prediction</h3>
							<form id="pred">
								<div class="row">
									<div class="col-md-6">
										<div class="form-group">
											<span class="form-label">Data Source</span>
											<input class="form-control" type="text" placeholder="Path to CSV/ElasticIndex" value="None" style="background-color: #DF8181" readonly disabled>
										</div>
									</div>
									<div class="col-md-6">
										<div class="form-group">
											<span class="form-label">Input Feature Values In Order</span>
											<input id="predInputs" name="predInputs" class="form-control" type="text" placeholder="Input Feature Values In Order">
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-md-6">
										<div class="form-group">
											<span class="form-label">Predicted Target Label(s) In Order</span>
											<input id="targets" name="targets" value="" class="form-control" type="text" placeholder="Prediction">
										</div>
									</div>
									<div class="col-md-6">
										<div class="form-group">
											<span class="form-label">Bucket Parameter Values In Order</span>
											<input id="bucketInputs" name="bucketInputs" class="form-control" type="text" placeholder="Bucket Parameter Values In Order">
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-md-6">
										<div class="form-group">
											<span class="form-label">Processed Data Destination</span>
											<input class="form-control" type="text" placeholder="Processed Data Destination" value="None" style="background-color: #DF8181" readonly disabled>
										</div>
									</div>
									<div class="col-md-6">
										<div class="form-group">
											<span class="form-label">Callback URL</span>
											<input id="callbackUrl" name="callbackUrl" class="form-control" type="text" placeholder="Callback URL" value="None" style="background-color: #DF8181" readonly disabled>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-md-3">
										<div class="form-group">
											<span class="form-label">UID</span>
											<input id="uid" name="uid" class="form-control" type="text" placeholder="UID">
										</div>
									</div>
									<div class="col-md-3">
										<div class="form-btn">
											<button class="submit-btn">Predict</button>
										</div>
									</div>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</body><!-- This templates was made by Colorlib (https://colorlib.com) -->

</html>